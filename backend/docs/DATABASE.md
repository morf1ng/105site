# üì¶ DATABASE.md

## üóÑÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç PostgreSQL, —Å—Ö–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞–º–∏, —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏, —ç—Ç–∞–ø–∞–º–∏ –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º, —Å–æ –≤—Å–µ–º–∏ –Ω—É–∂–Ω—ã–º–∏ —Å–≤—è–∑—è–º–∏ –∏ –∫–∞—Å–∫–∞–¥–Ω—ã–º —É–¥–∞–ª–µ–Ω–∏–µ–º.

---

### üèóÔ∏è **–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã**

| –¢–∞–±–ª–∏—Ü–∞                  | –û–ø–∏—Å–∞–Ω–∏–µ                                 |
|-------------------------|------------------------------------------|
| **project**             | –ì–ª–∞–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø—Ä–æ–µ–∫—Ç–µ  |
| **project_about_company** | –û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏, —Å–≤—è–∑–∞–Ω–Ω–æ–π —Å –ø—Ä–æ–µ–∫—Ç–æ–º (1:1) |
| **project_stage**       | –≠—Ç–∞–ø—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ (1:N)           |
| **project_result**      | –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–µ–∫—Ç–∞ (1:1)                  |
| **project_result_image**| –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (1:N –∫ result)     |
| **project_progress**    | –¶–∏—Ñ—Ä–æ–≤–æ–π/—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å (1:N)         |

---

### üîó **–ö–ª—é—á–µ–≤—ã–µ —Å–≤—è–∑–∏**

- `project.id` ‚Üê‚Üí `project_about_company.project_id` **(1:1)**
- `project.id` ‚Üê‚Üí `project_stage.project_id` **(1:N)**
- `project.id` ‚Üê‚Üí `project_result.project_id` **(1:1)**
- `project.id` ‚Üê‚Üí `project_progress.project_id` **(1:N)**
- `project_result.id` ‚Üê‚Üí `project_result_image.result_id` **(1:N)**

**–í—Å–µ foreign key –∏—Å–ø–æ–ª—å–∑—É—é—Ç `ON DELETE CASCADE`.**

<br>

---

### üèõÔ∏è **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –º–∏–≥—Ä–∞—Ü–∏–π**

- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ SQLAlchemy –º–æ–¥–µ–ª–µ–π (`app/models.py`).
- –î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç:
  
  ```bash
  python -m app.migration
  ```
- –í—Å–µ —Å–≤—è–∑–∏ –≤ ORM: `cascade="all, delete-orphan"`

---

### üìù **–ê–ª–≥–æ—Ä–∏—Ç–º –∑–∞–ø—É—Å–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏**

1. –ü—Ä–æ–≤–µ—Ä—å –∏ —É–∫–∞–∂–∏ —Ä–∞–±–æ—á–∏–π `DATABASE_URL` –≤ `app/database.py`.
2. –ò–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞ –∑–∞–ø—É—Å—Ç–∏:
   ```bash
   python -m app.migration
   ```
3. –ë—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–∞ –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –≤—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü –ø–æ –º–æ–¥–µ–ª—è–º.

---

### ‚úÖ **–°—Ç–∞—Ç—É—Å**

- [x] –í—Å–µ –º–æ–¥–µ–ª–∏ –∏ —Å–≤—è–∑–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Å–æ–≥–ª–∞—Å–Ω–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ
- [x] –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –∫–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
- [x] –ï—Å—Ç—å –±–∞–∑–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–µ–ø–ª–æ—è

---

